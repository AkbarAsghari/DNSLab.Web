@using DNSLab.Web.DTOs.Repositories.Payment
@using DNSLab.Web.Utilities
@attribute [Route(AllRoutes.AllPayments)]
@attribute [Authorize(Roles = AuthorizeRoles.Admin)]
<SeoProvider Title="پرداخت ها" />

<MudText Typo="Typo.h1" Align="Align.Center">پرداخت‌ها</MudText>
<MudText Class="mt-5 mb-10" Align="Align.Center">تمامی پرداخت های کاربران</MudText>

<MudCard Elevation="0">
    <MudCardContent>
            <MudDataGrid T="PaymentDTO" @ref="_Grid" ServerData="ServerReload" ExpandSingleRow Dense Hover Elevation="0" Filterable="false">
                <NoRecordsContent>
                    <NoRecordFound />
                </NoRecordsContent>
                <Columns>
                    <TemplateColumn Title="کاربر">
                        <CellTemplate>
                            <MudStack Row AlignItems="AlignItems.Center">
                                @((MarkupString)ProfileImageCreator.GenerateSVG(context.Item.User!.Id, 25))
                                @context.Item.User.FullName
                            </MudStack>
                        </CellTemplate>
                    </TemplateColumn>
                    <PropertyColumn Property="x=>x.Amount.Separate3Digits()" Title="مبلغ (ريال)" />
                    <PropertyColumn Property="x=>x.CreateDate" Title="زمان">
                        <CellTemplate>
                            <MudText>@context.Item.CreateDate.ToLocalTime().ToPersianDateTime()</MudText>
                        </CellTemplate>
                    </PropertyColumn>
                    <PropertyColumn Property="x=>x.Status" Title="وضعیت" />
                    <PropertyColumn Property="x=>x.Description" Title="توضیحات" />
                </Columns>
            <PagerContent>
                <MudDataGridPager T="PaymentDTO" RowsPerPageString="تعداد ردیف در هر صفحه" InfoFormat="{first_item}-{last_item} از {all_items}" />
            </PagerContent>
            </MudDataGrid>
    </MudCardContent>
</MudCard>